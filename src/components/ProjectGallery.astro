---
import Section from "./Section.astro";
import { projects } from "../data/projects";

/**
 * Resolve public assets correctly for GitHub Pages / subpaths
 */
const asset = (path) =>
  `${import.meta.env.BASE_URL}${path.replace(/^\//, "")}`;

const icons = {
  ecommerce: `
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-10 h-10">
      <path d="M6 6h15l-1.5 9h-13z" />
      <circle cx="9" cy="21" r="1" />
      <circle cx="18" cy="21" r="1" />
    </svg>
  `,
  html: `
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-10 h-10">
      <polyline points="16 18 22 12 16 6" />
      <polyline points="8 6 2 12 8 18" />
    </svg>
  `,
  photography: `
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-10 h-10">
      <path d="M23 19V7a2 2 0 0 0-2-2h-3l-2-3h-8l-2 3H3a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2z" />
      <circle cx="12" cy="13" r="4" />
    </svg>
  `,
  github: `
    <svg viewBox="0 0 24 24" fill="currentColor" class="w-10 h-10">
      <path d="M12 0C5.37 0 0 5.5 0 12.3c0 5.44 3.44 10.06 8.21 11.69.6.12.82-.27.82-.6 0-.29-.01-1.07-.02-2.1-3.34.75-4.04-1.67-4.04-1.67-.55-1.42-1.34-1.8-1.34-1.8-1.1-.78.08-.77.08-.77 1.22.09 1.86 1.28 1.86 1.28 1.08 1.9 2.83 1.35 3.52 1.03.11-.8.42-1.35.76-1.66-2.67-.31-5.47-1.37-5.47-6.1 0-1.35.46-2.45 1.22-3.31-.12-.31-.53-1.57.12-3.27 0 0 1-.33 3.3 1.27a11.1 11.1 0 0 1 6 0C17.3 3.3 18.3 3.63 18.3 3.63c.65 1.7.24 2.96.12 3.27.76.86 1.22 1.96 1.22 3.31 0 4.75-2.8 5.79-5.48 6.1.43.38.81 1.12.81 2.26 0 1.63-.02 2.94-.02 3.34 0 .33.22.72.82.6C20.56 22.36 24 17.74 24 12.3 24 5.5 18.63 0 12 0z"/>
    </svg>
  `,
};
---

<Section id="projects" title="Project Gallery">
  <div class="grid md:grid-cols-2 gap-6 print-gap-tight">
    {projects.map((p) => {
      const Wrapper = p.link ? "a" : "div";

      return (
        <Wrapper
          href={p.link}
          target={p.link ? "_blank" : undefined}
          rel={p.link ? "noreferrer" : undefined}
          class="group block rounded-xl border border-zinc-200 bg-white overflow-hidden shadow-soft print-flat hover:shadow-md transition-shadow focus:outline-none focus:ring-2 focus:ring-zinc-400"
        >
          <div class="flex items-center justify-center h-44 bg-gradient-to-br from-zinc-900 to-zinc-700 text-white">
            <div set:html={icons[p.icon]} />
          </div>

          <div class="p-5">
            <p class="text-xs font-medium uppercase tracking-wide text-zinc-500">
              {p.type}
            </p>

            <h3 class="mt-1 text-base md:text-lg font-semibold tracking-tight group-hover:underline">
              {p.title}
            </h3>

            <p class="mt-2 text-sm text-zinc-700 leading-relaxed">
              {p.description}
            </p>

            {p.link && (
              <p class="mt-3 text-sm font-medium text-zinc-900">
                View project â†’
              </p>
            )}
          </div>
        </Wrapper>
      );
    })}
  </div>
</Section>
